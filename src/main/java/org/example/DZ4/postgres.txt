üìë –®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ –æ—Å–Ω–æ–≤–Ω—ã–º –∫–æ–º–∞–Ω–¥–∞–º PostgreSQL
–í—Å—è —Ä–∞–±–æ—Ç–∞ —Å PostgreSQL –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º postgres.

$sudo su postgres
–†–∞–±–æ—Ç–∞—Ç—å —Å PosgreSQL –º–æ–∂–Ω–æ –∫–∞–∫ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ, —Ç–∞–∫ –∏ –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏. –ü—Ä–æ–≥—Ä–∞–º–º–∞ ‚Äî psql.

–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã PostgreSQL –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ:
\connect db_name ‚Äì –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ —Å –∏–º–µ–Ω–µ–º db_name
\du ‚Äì —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
\dp (–∏–ª–∏ \z) ‚Äì —Å–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π, –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π, –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–∏–º
\di ‚Äì –∏–Ω–¥–µ–∫—Å—ã
\ds ‚Äì –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
\dt ‚Äì —Å–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü
\dt+ ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º
\dt *s* ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö s –≤ –∏–º–µ–Ω–∏
\dv ‚Äì –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
\dS ‚Äì —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
\d+ ‚Äì –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
\o ‚Äì –ø–µ—Ä–µ—Å—ã–ª–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∑–∞–ø—Ä–æ—Å–∞ –≤ —Ñ–∞–π–ª
\l ‚Äì —Å–ø–∏—Å–æ–∫ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
\i ‚Äì —á–∏—Ç–∞—Ç—å –≤—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞
\e ‚Äì –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –±—É—Ñ–µ—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ (–µ—Å–ª–∏ –∏–Ω–æ–µ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π EDITOR, —Ç–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é vi)
\d ‚Äútable_name‚Äù ‚Äì –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
\i –∑–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥—ã –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ —Ñ–∞–π–ª–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä \i /my/directory/my.sql
\pset ‚Äì –∫–æ–º–∞–Ω–¥–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
\echo ‚Äì –≤—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
\set ‚Äì —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å—Ä–µ–¥—ã. –ë–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ —Ç–µ–∫—É—â–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (\unset ‚Äì —É–¥–∞–ª—è–µ—Ç).
\? ‚Äì —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ psql
\help ‚Äì —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ SQL
\q (–∏–ª–∏ Ctrl+D) ‚Äì –≤—ã—Ö–æ–¥ —Å –ø—Ä–æ–≥—Ä–∞–º–º—ã
–†–∞–±–æ—Ç–∞ —Å PostgreSQL –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏:
-c (–∏–ª–∏ ‚Äìcommand) ‚Äì –∑–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥—ã SQL –±–µ–∑ –≤—ã—Ö–æ–¥–∞ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
-f file.sql ‚Äî –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –∏–∑ —Ñ–∞–π–ª–∞ file.sql
-l (–∏–ª–∏ ‚Äìlist) ‚Äì –≤—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
-U (–∏–ª–∏ ‚Äìusername) ‚Äì —É–∫–∞–∑—ã–≤–∞–µ–º –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä postgres)
-W (–∏–ª–∏ ‚Äìpassword) ‚Äì –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–∞ –≤–≤–æ–¥ –ø–∞—Ä–æ–ª—è
-d dbname ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î dbname
-h ‚Äì –∏–º—è —Ö–æ—Å—Ç–∞ (—Å–µ—Ä–≤–µ—Ä–∞)
-s ‚Äì –ø–æ—à–∞–≥–æ–≤—ã–π —Ä–µ–∂–∏–º, —Ç–æ –µ—Å—Ç—å, –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã
‚ÄìS ‚Äì –æ–¥–Ω–æ—Å—Ç—Ä–æ—á–Ω—ã–π —Ä–µ–∂–∏–º, —Ç–æ –µ—Å—Ç—å, –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å (–∏–∑–±–∞–≤–ª—è–µ—Ç –æ—Ç ; –≤ –∫–æ–Ω—Ü–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ SQL)
-V ‚Äì –≤–µ—Ä—Å–∏—è PostgreSQL –±–µ–∑ –≤—Ö–æ–¥–∞ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
–ü—Ä–∏–º–µ—Ä—ã:
psql -U postgres -d dbname -c ¬´CREATE TABLE my(some_id serial PRIMARY KEY, some_text text);¬ª ‚Äî –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤ –±–∞–∑–µ dbname.

psql -d dbname -H -c ¬´SELECT * FROM my¬ª -o my.html ‚Äî –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞ –≤ html-—Ñ–∞–π–ª.

–£—Ç–∏–ª–∏—Ç—ã (–ø—Ä–æ–≥—Ä–∞–º–º—ã) PosgreSQL:
createdb –∏ dropdb ‚Äì —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ)
createuser –∏ dropuser ‚Äì —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ)
pg_ctl ‚Äì –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –æ–±—â–∏—Ö –∑–∞–¥–∞—á —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–∑–∞–ø—É—Å–∫, –æ—Å—Ç–∞–Ω–æ–≤, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ —Ç.–¥.)
postmaster ‚Äì –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –º–æ–¥—É–ª—å PostgreSQL (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Ä–æ–≤–Ω–µ–π –æ—Ç–ª–∞–¥–∫–∏, –ø–æ—Ä—Ç–æ–≤, –∫–∞—Ç–∞–ª–æ–≥–æ–≤ –¥–∞–Ω–Ω—ã—Ö)
initdb ‚Äì —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ PostgreSQL
initlocation ‚Äì –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ç–∞–ª–æ–≥–æ–≤ –¥–ª—è –≤—Ç–æ—Ä–∏—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
vacuumdb ‚Äì —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –∏ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ –ë–î
pg_dump ‚Äì –∞—Ä—Ö–∏–≤–∞—Ü–∏—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
pg_dumpall ‚Äì —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ PostgreSQL
pg_restore ‚Äì –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î –∏–∑ –∞—Ä—Ö–∏–≤–æ–≤ (.tar, .tar.gz)
–ü—Ä–∏–º–µ—Ä—ã —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π:
–°–æ–∑–¥–∞–Ω–∏–µ –±–µ–∫–∞–ø–∞ –±–∞–∑—ã mydb, –≤ —Å–∂–∞—Ç–æ–º –≤–∏–¥–µ

pg_dump -h localhost -p 5440 -U someuser -F c -b -v -f mydb.backup mydb
–°–æ–∑–¥–∞–Ω–∏–µ –±–µ–∫–∞–ø–∞ –±–∞–∑—ã mydb, –≤ –≤–∏–¥–µ –æ–±—ã—á–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞, –≤–∫–ª—é—á–∞—è –∫–æ–º–∞–Ω–¥—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ë–î

pg_dump -h localhost -p 5432 -U someuser -C -F p -b -v -f mydb.backup mydb
–°–æ–∑–¥–∞–Ω–∏–µ –±–µ–∫–∞–ø–∞ –±–∞–∑—ã mydb, –≤ —Å–∂–∞—Ç–æ–º –≤–∏–¥–µ, —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –≤ –∏–º–µ–Ω–∏ payments

pg_dump -h localhost -p 5432 -U someuser -F c -b -v -t *payments* -f payment_tables.backup mydb
–î–∞–º–ø –¥–∞–Ω–Ω—ã—Ö —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–π, –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–∞–±–ª–∏—Ü, —Ç–æ –∏–º–µ–Ω–∞ —ç—Ç–∏—Ö —Ç–∞–±–ª–∏—Ü –ø–µ—Ä–µ—á–∏—Å–ª—è—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –∫–ª—é—á–∞ -t –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü—ã.

pg_dump -a -t table_name -f file_name database_name
–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ —Å —Å–∂–∞—Ç–∏–µ–º –≤ gz

pg_dump -h localhost -O -F p -c -U postgres mydb | gzip -c > mydb.gz
–°–ø–∏—Å–æ–∫ –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –æ–ø—Ü–∏–π:
-h host ‚Äî —Ö–æ—Å—Ç, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω —Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è localhost –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è PGHOST.
-p port ‚Äî –ø–æ—Ä—Ç, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω —Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 5432 –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è PGPORT.
-u ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω —Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —Ç–∞–∫–∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è PGUSER.
-a, ‚Äîdata-only ‚Äî –¥–∞–º–ø —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã—Ö, –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∏ —Å—Ö–µ–º–∞.
-b ‚Äî –≤–∫–ª—é—á–∞—Ç—å –≤ –¥–∞–º–ø –±–æ–ª—å—à–∏–µ –æ–±—ä–µ–∫—Ç—ã (blog‚Äô–∏).
-s, ‚Äîschema-only ‚Äî –¥–∞–º–ø —Ç–æ–ª—å–∫–æ —Å—Ö–µ–º—ã.
-C, ‚Äîcreate ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ë–î.
-c ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è (drop) –æ–±—ä–µ–∫—Ç–æ–≤ (—Ç–∞–±–ª–∏—Ü, –≤–∏–¥–æ–≤ –∏ —Ç.–¥.).
-O ‚Äî –Ω–µ –¥–æ–±–∞–≤–ª—è—Ç—å –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –æ–±—ä–µ–∫—Ç–∞ (—Ç–∞–±–ª–∏—Ü, –≤–∏–¥–æ–≤ –∏ —Ç.–¥.).
-F, ‚Äîformat {c|t|p} ‚Äî –≤—ã—Ö–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–º–ø–∞, custom, tar, –∏–ª–∏ plain text.
-t, ‚Äîtable=TABLE ‚Äî —É–∫–∞–∑—ã–≤–∞–µ–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –¥–ª—è –¥–∞–º–ø–∞.
-v, ‚Äîverbose ‚Äî –≤—ã–≤–æ–¥ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.
-D, ‚Äîattribute-inserts ‚Äî –¥–∞–º–ø –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–º–∞–Ω–¥—É INSERT —Å —Å–ø–∏—Å–∫–æ–º –∏–º–µ–Ω —Å–≤–æ–π—Å—Ç–≤.
–ë–µ–∫–∞–ø –≤—Å–µ—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–º–∞–Ω–¥—É pg_dumpall.

pg_dumpall > all.sql
–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π (–±—ç–∫–∞–ø–æ–≤):
psql ‚Äî –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∫–∞–ø–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ–±—ã—á–Ω–æ–º —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ñ–∞–π–ª–µ (plain text);
pg_restore ‚Äî –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∂–∞—Ç—ã—Ö –±–µ–∫–∞–ø–æ–≤ (tar);

–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ–≥–æ –±–µ–∫–∞–ø–∞ —Å –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º –æ—à–∏–±–æ–∫

psql -h localhost -U someuser -d dbname -f mydb.sql
–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ–≥–æ –±–µ–∫–∞–ø–∞ —Å –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π –Ω–∞ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ

psql -h localhost -U someuser ‚Äîset ON_ERROR_STOP=on -f mydb.sql
–î–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ tar-–∞—Ä–∏—Ö–∏–≤–∞ –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞—Ç—å –±–∞–∑—É —Å –ø–æ–º–æ—â—å—é CREATE DATABASE mydb; (–µ—Å–ª–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±–µ–∫–∞–ø–∞ –Ω–µ –±—ã–ª–∞ —É–∫–∞–∑–∞–Ω–∞ –æ–ø—Ü–∏—è -C) –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å

pg_restore ‚Äîdbname=mydb ‚Äîjobs=4 ‚Äîverbose mydb.backup
–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ –ë–î, —Å–∂–∞—Ç–æ–π gz

gunzip mydb.gz
psql -U postgres -d mydb -f mydb


–ü–æ–ª–µ–∑–Ω—ã–µ –∫–ª—é—á–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã psql

-U - –£–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –Ω–∞–ø—Ä–∏–º–µ—Ä postgres
-W - –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–∞ –≤–≤–æ–¥ –ø–∞—Ä–æ–ª—è
-d –Ω–∞–∑–≤–∞–Ω–∏–µ_–ë–î - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î –Ω–∞–∑–≤–∞–Ω–∏–µ_–ë–î
-h –∏–º—è_—Ö–æ—Å—Ç–∞ - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ö–æ—Å—Ç—É –∏–º—è_—Ö–æ—Å—Ç–∞
-p –ø–æ—Ä—Ç - –ü–æ –∫–∞–∫–æ–º—É –ø–æ—Ä—Ç—É –ø–æ—Å—Ç–≥—Ä—è –æ–∂–∏–¥–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
-c –∫–æ–º–∞–Ω–¥–∞ - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã SQL –±–µ–∑ –≤—ã—Ö–æ–¥–∞ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
-f file.sql - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –∏–∑ —Ñ–∞–π–ª–∞ file.sql
-S - –û–¥–Ω–æ—Å—Ç—Ä–æ—á–Ω—ã–π —Ä–µ–∂–∏–º, —Ç–æ –µ—Å—Ç—å, –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å (–∏–∑–±–∞–≤–ª—è–µ—Ç –æ—Ç ; –≤ –∫–æ–Ω—Ü–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ SQL)

–ü–æ–ª–µ–∑–Ω—ã–µ psql –∫–æ–º–∞–Ω–¥—ã

\? - –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º psql
\h - –°–ø—Ä–∞–≤–∫–∞ –ø–æ SQL: —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –∏–ª–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ–Ω—Ä–µ—Ç–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã
\q - –í—ã—Ö–æ–¥ –∏–∑ psql
\c –Ω–∞–∑–≤–∞–Ω–∏–µ_–ë–î - –í—ã–±—Ä–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
\l - –°–ø–∏—Å–æ–∫ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
\s –∏–º—è-—Ñ–∞–π–ª–∞-–¥–ª—è-—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è-–∏—Å—Ç–æ—Ä–∏–∏-–∫–æ–º–∞–Ω–¥
\dt - –°–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü
\di - –°–ø–∏—Å–æ–∫ –∏–Ω–¥–µ–∫—Å–æ–≤
\du - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
\dv - –°–ø–∏—Å–æ–∫ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π
\df - –°–ø–∏—Å–æ–∫ —Ñ—É–Ω–∫—Ü–∏–π
\dn - –°–ø–∏—Å–æ–∫ —Å—Ö–µ–º
\dx - –°–ø–∏—Å–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π
\dp - –°–ø–∏—Å–æ–∫ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π
\d –∏–º—è - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –æ–±—ä–µ–∫—Ç—É
\d+ –∏–º—è - –µ—â–µ –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –æ–±—ä–µ–∫—Ç—É
\di+ –∏–º—è
\x - –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –æ–±—ã—á–Ω—ã–π —Ç–∞–±–ª–∏—á–Ω—ã–π –≤—ã–≤–æ–¥ (—Å—Ç–æ–ª–±—Ü—ã –∏ —Å—Ç—Ä–æ–∫–∏) –Ω–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π (–∫–∞–∂–¥—ã–π —Å—Ç–æ–ª–±–µ—Ü –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ) –∏ –æ–±—Ä–∞—Ç–Ω–æ. –£–¥–æ–±–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö "—à–∏—Ä–æ–∫–∏—Ö" —Å—Ç—Ä–æ–∫

–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
CREATE DATABASE db_name; - –°–æ–∑–¥–∞–µ–º –ë–î —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º db_name
CREATE USER db_user WITH PASSWORD 'db_user_pw'; - –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è db_user —Å –ø–∞—Ä–æ–ª–µ–º db_user_pw
GRANT ALL PRIVILEGES ON DATABASE db_name to db_user; - –î–∞–µ–º –í–°–ï –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é db_user –Ω–∞ –±–∞–∑—É db_name
SELECT rolname FROM pg_roles; - –ì–ª—è–Ω—É—Ç—å –≤—Å–µ —Ä–æ–ª–∏ –≤ –±–∞–∑–µ
SELECT session_user; - –ì–ª—è–Ω—É—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ–¥ –∫–æ—Ç–æ—Ä—ã–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–µ–∞–Ω—Å

SELECT * FROM pg_stat_activity WHERE state = 'active'; - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –≤—ã–ø–æ–ª–Ω—è–µ–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
SELECT pg_cancel_backend(<pid of the process>); - kill'—è–µ–º –Ω–µ—É–≥–æ–¥–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å
SELECT pg_terminate_backend(<pid of the process>); - –µ—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å kill'–µ–Ω, —Ç–æ –ø—Ä–æ–±—É–µ–º —ç—Ç–æ. –ë–æ–ª–µ–µ —Å–∏–ª—å–Ω–∞—è –º–∞–≥–∏—è
SELECT pg_size_pretty(pg_database_size(current_database())); - –ø–æ–ª—É—á–∏—Ç—å –∫—Ä–∞—Å–∏–≤—ã–π —Ä–∞–∑–º–µ—Ä –±–¥
SELECT pg_relation_size('accounts'); - –ø–æ–ª—É—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã


/usr/local/pgsql/data/postgresql.conf - –æ–±—ã—á–Ω–æ –∑–¥–µ—Å—å –ª–µ–∂–∏—Ç –∫–æ–Ω—Ñ–∏–≥


docker run --name postgres -e POSTGRES_PASSWORD=123 -p 5432:5432 -d postgres:16

docker run --name postgres -e POSTGRES_PASSWORD=123 -p 5432:5432 -d postgres:latest

docker ps

docker logs -f postgres

docker exec -it postgres bash

psql -U postgres


–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü:
\dt

\dt
\d autor
SELECT * FROM autor;

postgres=# \d autor
                       Table "public.autor"
 Column |          Type          | Collation | Nullable | Default
--------+------------------------+-----------+----------+---------
 id     | bigint                 |           | not null |
 name   | character varying(55)  |           |          |
 title  | character varying(255) |           |          |
Indexes:
    "autor_pkey" PRIMARY KEY, btree (id)

postgres=# DROP TABLE autor;

DROP TABLE